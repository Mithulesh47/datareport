<!-- Add Area Form -->
<form [formGroup]="areaForm" (ngSubmit)="addArea()" class="form-container">
  <mat-card>
    <mat-card-title>Add New Area</mat-card-title>
    <mat-card-content>
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Area Name</mat-label>
        <input matInput formControlName="name" />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Lead Name</mat-label>
        <input matInput formControlName="leadName" />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Lead Email</mat-label>
        <input matInput type="email" formControlName="leadEmail" />
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary" type="submit" [disabled]="areaForm.invalid">Submit</button>
    </mat-card-actions>
  </mat-card>
</form>

<hr />

<h3>List of areas:</h3>
<mat-list>
  <mat-list-item *ngFor="let area of areas; let i = index">
    <div *ngIf="editIndex !== i" class="area-view">
      <div><strong>Name:</strong> {{ area.name }}</div>
      <div><strong>Lead Name:</strong> {{ area.leadName }}</div>
      <div><strong>Lead Email:</strong> {{ area.leadEmail }}</div>

      <span>
        <button mat-icon-button color="primary" (click)="enableEdit(i)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="confirmDelete(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </span>
    </div>
  </mat-list-item>
</mat-list>

<!-- Edit form displayed separately -->
<div *ngIf="editIndex !== null" class="editSection">
  <form [formGroup]="editForm" (ngSubmit)="saveEdit(editIndex)" class="edit-form">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Area Name</mat-label>
      <input matInput formControlName="name" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Lead Name</mat-label>
      <input matInput formControlName="leadName" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Lead Email</mat-label>
      <input matInput type="email" formControlName="leadEmail" />
    </mat-form-field>

    <div>
      <button mat-raised-button color="primary" type="submit" [disabled]="editForm.invalid">Save</button>
      <button mat-button type="button" (click)="cancelEdit()">Cancel</button>
    </div>
  </form>
</div>

<!-- Confirmation Dialog -->
<ng-template #deleteDialog>
  <h2 mat-dialog-title>Are you sure?</h2>
  <mat-dialog-content>
    <p>Are you sure you want to delete this area?</p>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button [mat-dialog-close]="false">Cancel</button>
    <button mat-button color="warn" [mat-dialog-close]="true">Delete</button>
  </mat-dialog-actions>
</ng-template>